<div ng-show="!errorDetails.length > 0">
  <div class="spinner">
    <div class="dot1"></div>
    <div class="dot2"></div>
  </div>
  <div class="message">Collecting Errors... This can take quite some time</div>
  <uib-progressbar ng-show="errorProgress.progress < 100" value="errorProgress.processed" max="errorProgress.total">
    <span style="color:white; white-space:nowrap;">{{ errorProgress.processed }} / {{ errorProgress.total }}</span>
  </uib-progressbar>
</div>

<div ng-if="errorDetails.length > 0">
  <h2>Error report</h2>

  <p>This view presents to list of errors grouped by the error message. The grouping is done using Apache Lucene's
    index and we're using feature called More Like This. The results are not perfect but should give you an indicate
    of the impact of a particular error. We recommend you use the search feature to complement this view when doing
    test results analysis.</p>

  <p>There are {{ errorDetails.length }} types of errors in the table below.</p>

  <table class="table testErrorsTable" ng-table="tableParameters">
    <tr ng-repeat-start="details in errorDetails track by $index">
      <td title="'Error message'">{{details.error.substr(0, 200)}}</td>
      <td title="'# of affected tests'">{{details.affectedTests.length}}</td>
      <td title="'Links'">
        <a ng-href="#" ng-show="!showErrors" ng-click="showErrors = true">Expand</a>
        <a ng-href="#" ng-show="showErrors" ng-click="showErrors = false">Collapse</a>
      </td>
    </tr>
    <tr ng-repeat-end ng-if="showErrors">
      <td colspan="8" class="details">
        <h3>Error message</h3>
        <div>
          <pre>{{ details.error }}</pre>
        </div>

        <p>Search automatically generated based on these terms: {{ details.interestingTerms.join(', ') }}</p>
        <p>Link to SOLR query: <a href="{{ details.url }}" target="_blank">Solr Link</a></p>

        <test-report-table tests="details.affectedTests"></test-report-table>

        <p>
          <a ng-href="#" ng-click="showErrors = false">Collapse</a>
        </p>
      </td>
    </tr>
  </table>
</div>
